<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script
      src="https://docs.opencv.org/4.x/opencv.js"
      type="text/javascript"
    ></script>
    <script src="shingraphic.js"></script>
    <script src="shinmiungjo.js"></script>
    <script src="threed.js"></script>
    <link rel="icon" href="bangaimg.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      @font-face {
        font-family: 'Pretendard-Regular';
        src: url('https://fastly.jsdelivr.net/gh/Project-Noonnu/noonfonts_2107@1.1/Pretendard-Regular.woff')
          format('woff');
        font-weight: 400;
        font-style: normal;
      }

      @font-face {
        font-family: 'Pretendard-ExtraBold';
        src: url('https://fastly.jsdelivr.net/gh/Project-Noonnu/noonfonts_2107@1.1/Pretendard-ExtraBold.woff')
          format('woff');
      }

      * {
        font-family: 'Pretendard-Regular';
      }
      html,
      body {
        margin: 0;
        padding: 0;
        height: 100dvh;
      }

      body {
        padding-left: 10px;
        padding-right: 10px;
      }

      #main {
        display: flex;
        flex-direction: column;
        height: 100%;
        /* border: 1px solid black; */
      }

      #boxes {
        flex: 1 1 0;
        display: flex;
        min-height: 0;
        /* border: 1px solid black; */
      }

      #pictureBox {
        flex: 1 1 0;
        display: flex;
        flex-direction: column;
        min-height: 0;
        border: 2.5px solid darkslategray;
        border-radius: 20px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.19),
          0 4px 13px rgba(0, 0, 0, 0.23);
        background-color: rgb(232, 249, 255);
      }

      #problemsText {
        flex: 0 0 auto;
        text-align: center;
        padding: 5px;
        font-weight: bold;
        font-size: 20px;
      }

      #problemCollector {
        flex: 1 1 auto;
        overflow-y: auto;
        padding: 5px;
        box-sizing: border-box;
        min-height: 0;
        /* border: 1px solid black; */
      }

      #canvasBox {
        flex: 2 0 0;
        /* border: 1px solid black; */
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        overflow: hidden; /* canvas 넘치는 부분 숨기기 */
        padding: 20px;
        gap: 7px;
      }

      #shotBox {
        flex: 0.5 0 0;
        display: flex;
        align-items: center;
        justify-content: center;
        /* border: 1px solid black; */
        position: relative;
      }

      #shotbutton {
        width: 100px;
        height: 100px;
        border-radius: 100px;
        background-color: rgb(232, 249, 255);
        border: 2.5px solid darkslategray;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.19),
          0 4px 13px rgba(0, 0, 0, 0.23);
        font-size: 25px;
        font-family: 'Pretendard-ExtraBold' !important;
      }

      .problemBox {
        /* border: 1px solid black; */
        width: 100%;
        margin-bottom: 15px;
        display: flex;
        flex-direction: column;
        align-items: center;
        border: 2.5px solid darkslategray;
        border-radius: 20px;
        box-sizing: border-box;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.19),
          0 4px 13px rgba(0, 0, 0, 0.23);
        overflow: hidden;
      }

      .problemBox img {
        width: 100%;
        height: auto;
        object-fit: contain;
        display: block;
      }
      #camera {
        display: none;
      }

      #downloadbutton {
        position: absolute;
        transform: translate(-50%, 0);
        left: 50%;
        bottom: 20px;
        background-color: rgb(120, 134, 199);
        border: none;
        color: white;
        border-radius: 10px;
        padding: 5px 10px;
        font-size: 20px;
        font-weight: bold;
      }

      #canvas {
        width: 100%;
        height: auto;
        max-width: 100%; /* 부모 너비 넘지 않음 */
        max-height: 100%; /* 부모 높이 넘지 않음 */
        object-fit: contain;
        border-radius: 20px;
        border: 2.5px solid darkslategray;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.19),
          0 4px 13px rgba(0, 0, 0, 0.23);
      }

      #fileTitle {
        position: absolute;
        transform: translate(-50%, 0);
        left: 50%;
        bottom: 60px;
        width: 160px;
        outline: none;
        border: 2.5px solid darkslategray;
        font-size: 13px;
        border-radius: 100px;
        padding: 5px 2px;
      }

      #problemStartNum {
        position: absolute;
        transform: translate(-50%, 0);
        left: 50%;
        bottom: 100px;
        width: 160px;
        border-radius: 100px;
        outline: none;
        border: 2.5px solid darkslategray;
        font-size: 13px;
        padding: 5px 2px;
      }

      #bangaimg {
        width: 50px;
      }

      #cameraSelect {
        background-color: rgb(120, 134, 199);
        border-radius: 100px;
        padding: 3px 0px;
        color: white;
        font-weight: bold;
      }

      #start {
        background-color: rgb(120, 134, 199);
        border: none;
        color: white;
        border-radius: 100px;
        padding: 4px 12px;
        font-size: 15px;
        font-weight: bold;
      }

      #fakeFileInput {
        background-color: rgb(196, 217, 255);
        border: none;

        border-radius: 100px;
        padding: 4px 12px;
        font-size: 15px;
        font-weight: bold;
      }

      #fileInput {
        display: none;
      }
    </style>
    <title>Banga | 방아</title>
  </head>
  <body>
    <div id="main">
      <div
        style="
          display: flex;
          align-items: center;
          justify-content: space-around;
        "
      >
        <div
          style="
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
          "
        >
          <img src="bangaimg.png" alt="방아 이미지" id="bangaimg" />

          <h1 id="title" style="font-family: 'Pretendard-ExtraBold' !important">
            Banga
          </h1>
          <div
            style="
              background-color: rgb(196, 217, 255);
              border-radius: 100px;
              padding: 2px 10px;
            "
          >
            project Orm
          </div>
        </div>
        <div style="color: red; font-weight: bold">
          "센서 사용 시작" 반드시 누르시오.
        </div>
      </div>
      <div id="boxes">
        <div id="pictureBox">
          <div id="problemsText">문제들 (이미지 클릭시 삭제됨)</div>
          <div id="problemCollector"></div>
        </div>
        <div id="canvasBox">
          <canvas id="canvas"></canvas>
          <div
            style="
              display: flex;
              gap: 5px;
              align-items: center;
              flex-wrap: wrap;
            "
          >
            <select id="cameraSelect"></select>
            <div style="font-weight: bold">세로 길이 :</div>
            <input
              type="range"
              id="therange"
              min="0.5"
              max="2"
              value="1.2"
              step="0.01"
            />
            <button id="start">센서 사용 시작</button><br />
            <button id="fakeFileInput">이미지로 문제 추가</button>
            <input type="file" id="fileInput" multiple />
          </div>
        </div>
        <div id="shotBox">
          <button id="shotbutton">SHOT</button>
          <input
            type="text"
            placeholder="문항시작번호(No번호?빈칸ㄱ)"
            id="problemStartNum"
          />
          <input type="text" placeholder="제목" id="fileTitle" />
          <button id="downloadbutton">Download</button>
        </div>
      </div>
      <video id="camera" autoplay playsinline></video>
    </div>
    <script src="index.js"></script>
  </body>
</html>
